<!DOCTYPE html>
<html>
<head>
<style>
#section1 { height: 600px; background: pink; }
#section2 { height: 600px; background: yellow; }

/* Disable long-press menu & highlight */
.scroll-link {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.scroll-link:active {
    background-color: red;
    color: white;
}
</style>
</head>
<body>

<div id="section1">
  <h2>Section 1</h2>
  <a href="#section2" class="scroll-link">Go to Section 2</a>
</div>

<div id="section2">
  <h2>Section 2</h2>
  <a href="#section1" class="scroll-link">Back to Section 1</a>
</div>

<script>
// CUSTOM SLOW SMOOTH SCROLL FUNCTION
function smoothScrollTo(targetY, duration = 800) {
    const startY = window.scrollY;
    const distance = targetY - startY;
    let startTime = null;

    function anim(currentTime) {
        if (!startTime) startTime = currentTime;
        const timeElapsed = currentTime - startTime;

        const t = Math.min(timeElapsed / duration, 1);
        const ease = t < 0.5 ? (4 * t * t * t) : (1 - Math.pow(-2 * t + 2, 3) / 2);

        window.scrollTo(0, startY + distance * ease);

        if (timeElapsed < duration) requestAnimationFrame(anim);
    }

    requestAnimationFrame(anim);
}

document.querySelectorAll(".scroll-link").forEach(link => {

    let pressTimer;

    // Block context menu (long press menu)
    link.addEventListener("contextmenu", e => e.preventDefault());

    // Touch start
    link.addEventListener("touchstart", () => {
        pressTimer = setTimeout(() => {}, 300);
    }, { passive: false });

    // Touch end â†’ scroll
    link.addEventListener("touchend", function(e) {
        e.preventDefault(); // works now because passive:false
        clearTimeout(pressTimer);

        const target = document.querySelector(this.getAttribute("href"));
        smoothScrollTo(target.offsetTop, 800);
    }, { passive: false });

    // Desktop click
    link.addEventListener("click", function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute("href"));
        smoothScrollTo(target.offsetTop, 800);
    });
});
</script>

</body>
</html>
